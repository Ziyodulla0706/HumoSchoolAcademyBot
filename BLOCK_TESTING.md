# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

–°–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ middleware `BlockCheckMiddleware`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥ **–∫–∞–∂–¥—ã–º** –¥–µ–π—Å—Ç–≤–∏–µ–º –≤ –±–æ—Ç–µ.

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

### ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è middleware (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è):
1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã** - –ø–æ —Å–ø–∏—Å–∫—É `ADMIN_IDS`
2. **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö**:
   - `/start` - —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
   - `/cancel` - –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
3. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ callback**:
   - `pickup_done:*` - –¥–µ–π—Å—Ç–≤–∏—è –æ—Ö—Ä–∞–Ω—ã
   - `approve_user:*` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `admin_*` - –≤—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
   - `teacher_verify:*` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª–µ–π
   - `teacher_reject:*` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª–µ–π

### ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π (–æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–æ–∫, –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ü–µ–Ω–æ–∫, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ—Ç–µ–π –∏ —Ç.–¥.)
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —É—á–∏—Ç–µ–ª–µ–π (–≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –î–ó –∏ —Ç.–¥.)
- –õ—é–±—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ –∫–æ–º–∞–Ω–¥—ã, –Ω–µ –≤—Ö–æ–¥—è—â–∏–µ –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö

## –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—è
1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∫–∞–∫ —Ä–æ–¥–∏—Ç–µ–ª—å
2. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –ê–¥–º–∏–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**: –†–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–∑ —Ä–µ–±–µ–Ω–∫–∞ ‚úÖ
4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –ê–¥–º–∏–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è —á–µ—Ä–µ–∑ `/admin`
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**:
   - –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É ‚Üí "‚ùå –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" ‚ùå
   - –ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–±–µ–Ω–∫–∞ ‚Üí "‚ùå –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" ‚ùå
   - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ü–µ–Ω–∫–∏ ‚Üí "‚ùå –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" ‚ùå
   - –ö–æ–º–∞–Ω–¥–∞ `/start` ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ ‚úÖ

### –¢–µ—Å—Ç 2: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É—á–∏—Ç–µ–ª—è
1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∫–∞–∫ —É—á–∏—Ç–µ–ª—å
2. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –ê–¥–º–∏–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞—è–≤–∫—É —É—á–∏—Ç–µ–ª—è
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**: –£—á–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É ‚úÖ
4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –ê–¥–º–∏–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `/admin`
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**:
   - –ü–æ–ø—ã—Ç–∫–∞ –≤—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É ‚Üí "‚ùå –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" ‚ùå
   - –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–º–µ—Ç–∏—Ç—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å ‚Üí "‚ùå –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" ‚ùå
   - –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è–º ‚Üí "‚ùå –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" ‚ùå

### –¢–µ—Å—Ç 3: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç ‚ùå
3. **–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –ê–¥–º–∏–Ω —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ `/admin`
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–Ω–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç ‚úÖ

### –¢–µ—Å—Ç 4: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
1. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞–¥–º–∏–Ω–æ–≤**: –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å "–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω" –≤ –ë–î, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
2. **–û—Ö—Ä–∞–Ω–∞ –º–æ–∂–µ—Ç –æ—Ç–º–µ—á–∞—Ç—å –≤—ã–¥–∞—á—É**: –ö–Ω–æ–ø–∫–∞ "–í—ã–¥–∞–Ω" –≤ –∫–∞–Ω–∞–ª–µ –æ—Ö—Ä–∞–Ω—ã —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
3. **–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**: –í—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç ‚úÖ

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
```
/admin - –æ—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
# –í–≤–µ—Å—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Telegram ID —Ä–æ–¥–∏—Ç–µ–ª—è
# –ù–∞–∂–∞—Ç—å "üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å" –∏–ª–∏ "üîì –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"
```

### –î–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```
/start - –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
–õ—é–±–∞—è –∫–Ω–æ–ø–∫–∞ - –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å "‚ùå –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Middleware**: `bot/middlewares/block_check.py`
- **–ú–æ–¥–µ–ª—å**: `User.is_blocked` –≤ `bot/db/models.py`
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: `bot/handlers/admin_manage.py`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î
```python
user = session.query(User).filter(User.telegram_id == telegram_id).first()
if user and user.is_blocked:
    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
- "üîí –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º."
- "üîí –í–∞—à –∞–∫–∫–∞—É–Ω—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º."

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
1. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (–ø–æ –¥–∏–∑–∞–π–Ω—É)
2. `/start` –∏ `/cancel` –¥–æ—Å—Ç—É–ø–Ω—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º (–¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è)
3. Callback –æ—Ç –æ—Ö—Ä–∞–Ω—ã (`pickup_done`) –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É (–∫–∞–Ω–∞–ª –æ—Ö—Ä–∞–Ω—ã –∑–∞–∫—Ä—ã—Ç—ã–π)
